; highstakes.ini (v0.5 OCR)
; Put this next to RDR2.exe (game root).

[Main]
PokerRadius=25.0
MessageDurationMs=1500
EnterCooldownMs=3000
CheckIntervalMs=100
DebugOverlay=0

[OCR]
; OCR-based poker detection.
; Requires tesseract.exe available in PATH or absolute TesseractPath below.
Enabled=1
IntervalMs=1000
ProcessTimeoutMs=2000
; Corner OCR zones (percent of game window):
; - BottomLeft: player list + blind/turn text
; - TopRight: pot/card HUD
BottomLeftXPct=0
BottomLeftYPct=34
BottomLeftWPct=34
BottomLeftHPct=66
TopRightXPct=72
TopRightYPct=0
TopRightWPct=28
TopRightHPct=30
PSM=11
DebugReasonOverlay=0
; Includes [OCR] and parsed money line [OCR$] in highstakes.log.
LogEveryMs=2000
DumpArtifacts=0
PhaseStableMs=1800
OutStableMs=4200
PhaseConfThreshold=0.62
OpacityHintEnable=1
OpacityRoiXPct=72
OpacityRoiYPct=66
OpacityRoiWPct=27
OpacityRoiHPct=30
OpacityLow=8
OpacityHigh=28
; Fade/blackout guard: prevents brief low-opacity transitions from forcing OUT_OF_POKER.
BlackoutGuardEnable=1
BlackoutOpacityThreshold=0.18
BlackoutAnchorGraceMs=6000
BlackoutOutExtraMs=2500
BlackoutMaxHoldMs=2500
; Winner-collection pause guard: keeps poker state during payout settle pauses.
PayoutGuardEnable=1
PayoutMarkerGraceMs=9000
PayoutOutExtraMs=5000
; Used to locate your own row amount in OCR text (lowercase token).
PlayerNameHint=arthur
; Prefer portable OCR runtime in game root if available.
TesseractPath=highstakes_ocr\tesseract.exe
Keywords=poker,ante,call,fold,raise,check,bet,pot,blind,cards,community,turn

[Money]
; v0.5 OCR money scanner (chips/pot)
;
; What this does:
; - While you're seated at a poker table (inPoker=1), it scans ScriptHook script globals
;   looking for integer values that behave like chip stacks / pot values.
; - It shows the top changing candidates on-screen, so you can identify the correct globals.
;
; Hotkeys:
;   DEL  toggle money overlay
;   END  reset scan (useful after you sit down / rebuy / new hand)
;   PGUP reload ini
;   PGDN toggle draw method

Overlay=1
ScanEnable=1

; Global index scan range. RDR2 poker globals are typically in 0-100k range.
; Narrowing this drastically speeds up wrap time.
ScanStart=0
ScanEnd=100000

; Performance knobs - faster scan to complete a full wrap quickly
ScanBatch=512
ScanIntervalMs=20
ScanMaxReadsPerStep=512
ScanMaxStepMs=4
; SEH read-fault logging cooldown. 0 logs once per scan session.
ExceptionLogCooldownMs=30000
; Optional resilience: skip forward on contiguous SEH fault runs.
SkipFaultRuns=1
LogEnable=1
LogIntervalMs=3000
LogTopN=5
; Log snapshots only when the top candidate or candidate set changes materially.
LogOnlyOnChange=1
; Candidates changing faster than this are treated as non-money noise.
LikelyMaxChangesPerSec=1.5
; Saint Denis bet rule: legal changes are $10, $15, $20... (step $5, min $10).
BetStepFilterEnable=1
BetStepDollars=5
BetMinDollars=10
; OCR matching gives each candidate a confidence score based on detected $ amounts.
OcrMatchToleranceCents=6
; Keep up to this many OCR amounts as probable NPC stacks after excluding pot/player/wins.
NpcTrackMax=5
; When auto-lock succeeds, PotGlobal is written back to the active highstakes.ini.
AutoLockPot=1
AutoLockPotMinMatches=10
; Auto-locks StackGlobal0 as your own stack source when OCR can identify your row.
AutoLockPlayer=1
AutoLockPlayerMinMatches=8
; Overlay multiplier for preview values.
OverlayMultiplier=2.0
; Auto payout (story cash) during payout settlement phase.
; bonus = source * (PayoutMultiplier - 1.0)
PayoutEnable=0
PayoutMultiplier=2.0
PayoutUseWinsAmount=1
PayoutFallbackToPot=1
PayoutCooldownMs=6000
PayoutMinPhaseConf=0.55

; Candidate integer range - EXCLUDE zero to avoid noise.
; Poker buy-ins in RDR2 are typically $1-$5000 (stored as cents: 100-500000)
; Widen range to catch cent-based storage.
ValueMin=1
ValueMax=500000

; Overlay display
TopN=10
PruneMs=300000

; Once you identify the real globals, put them here to display exact values:
PotGlobal=-1
StackGlobal0=-1
StackGlobal1=-1
StackGlobal2=-1
StackGlobal3=-1
StackGlobal4=-1
StackGlobal5=-1

[HUD]
; 0 = legacy text only
; 1 = hybrid panel + toasts
; 2 = Rockstar-style toasts + hybrid panel
HUDUiMode=2
ToastEnabled=1
ToastFallbackText=1
ToastIconDict=ITEMTYPE_TEXTURES
ToastIcon=ITEMTYPE_CASH
ToastColor=COLOR_PURE_WHITE
ToastDurationMs=450
; Retry native toast path after SEH failure (prevents one-time failure from forcing fallback forever)
ToastRetryMs=4000
; Optional frontend sound hook for right toasts
ToastSoundSet=
ToastSound=
; Right-side panel
PanelX=80
PanelY=94
PanelLineStep=2.2
PanelMaxLines=24
; 1 = anchor at bottom and stack upward, 0 = anchor at top and stack downward
PanelAnchorBottom=1

; Legacy text renderer compatibility/fallback
DrawMethod=1
